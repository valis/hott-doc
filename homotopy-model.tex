\documentclass{amsart}

\usepackage[english,russian]{babel}
\usepackage[utf8]{inputenc}
\usepackage{amssymb}
\usepackage[all]{xy}
\usepackage{verbatim}
\usepackage{ifthen}
\usepackage{xargs}
\usepackage{bussproofs}
\usepackage{type1ec}
\usepackage{stmaryrd}
% \usepackage[T2A]{fontenc}

\providecommand\WarningsAreErrors{false}
\ifthenelse{\equal{\WarningsAreErrors}{true}}{\renewcommand{\GenericWarning}[2]{\GenericError{#1}{#2}{}{This warning has been turned into a fatal error.}}}{}

\newcommand{\newref}[4][]{
\ifthenelse{\equal{#1}{}}{\newtheorem{h#2}[hthm]{#4}}{\newtheorem{h#2}{#4}[#1]}
\expandafter\newcommand\csname r#2\endcsname[1]{#3~\ref{#2:##1}}
\expandafter\newcommand\csname R#2\endcsname[1]{#4~\ref{#2:##1}}
\newenvironmentx{#2}[2][1=,2=]{
\ifthenelse{\equal{##2}{}}{\begin{h#2}}{\begin{h#2}[##2]}
\ifthenelse{\equal{##1}{}}{}{\label{#2:##1}}
}{\end{h#2}}
}

\newref[section]{thm}{theorem}{Theorem}
\newref{lem}{lemma}{Lemma}
\newref{prop}{proposition}{Proposition}
\newref{cor}{corollary}{Corollary}

\theoremstyle{definition}
\newref{defn}{definition}{Definition}
\newref{example}{example}{Example}

\theoremstyle{remark}
\newref{remark}{remark}{Remark}

\newcommand{\red}{\Rightarrow}
\newcommand{\deq}{\Leftrightarrow}
\renewcommand{\ll}{\llbracket}
\newcommand{\rr}{\rrbracket}

\newcommand{\pb}[1][dr]{\save*!/#1-1.2pc/#1:(-1,1)@^{|-}\restore}
\newcommand{\po}[1][dr]{\save*!/#1+1.2pc/#1:(1,-1)@^{|-}\restore}

\numberwithin{figure}{section}

\begin{document}

\title{An interpretation of homotopy type theory in categories with attributes}

\author{Valery Isaev}

% \begin{abstract}
% Abstract
% \end{abstract}

\maketitle

\section{Правила вывода}

\begin{table}

\medskip
\begin{center}
\AxiomC{}
\UnaryInfC{$\varnothing \vdash$}
\DisplayProof
\quad
\AxiomC{$\Gamma \vdash A$}
\RightLabel{, $x \notin \Gamma$}
\UnaryInfC{$\Gamma, x : A \vdash$}
\DisplayProof
\end{center}

\medskip
\begin{center}
\AxiomC{$\Gamma \vdash A$}
\RightLabel{, $x \notin \Gamma$}
\UnaryInfC{$\Gamma, x : A \vdash x : A$}
\DisplayProof
\quad
\AxiomC{$\Gamma \vdash x : A$}
\AxiomC{$\Gamma \vdash B$}
\RightLabel{, $y \notin \Gamma$}
\BinaryInfC{$\Gamma, y : B \vdash x : A$}
\DisplayProof
\end{center}

\medskip
\begin{center}
\AxiomC{$\Gamma \vdash a : A$}
\AxiomC{$\Gamma \vdash A \deq B$}
\BinaryInfC{$\Gamma \vdash a : B$}
\DisplayProof
\end{center}

\medskip
\begin{center}
\AxiomC{$\Gamma \vdash A \red B$}
\UnaryInfC{$\Gamma \vdash A \deq B$}
\DisplayProof
\quad
\AxiomC{$\Gamma \vdash A \deq B$}
\UnaryInfC{$\Gamma \vdash B \deq A$}
\DisplayProof
\end{center}

\medskip
\begin{center}
\AxiomC{$\Gamma \vdash A \deq B$}
\AxiomC{$\Gamma \vdash B \deq C$}
\BinaryInfC{$\Gamma \vdash A \deq C$}
\DisplayProof
\end{center}

\medskip
\begin{center}
\AxiomC{$\Gamma \vdash a \red a' : A$}
\UnaryInfC{$\Gamma \vdash a \deq a' : A$}
\DisplayProof
\quad
\AxiomC{$\Gamma \vdash a \deq a' : A$}
\UnaryInfC{$\Gamma \vdash a' \deq a : A$}
\DisplayProof
\end{center}

\medskip
\begin{center}
\AxiomC{$\Gamma \vdash a \deq a' : A$}
\AxiomC{$\Gamma \vdash a' \deq a'' : A$}
\BinaryInfC{$\Gamma \vdash a \deq a'' : A$}
\DisplayProof
\end{center}

\medskip
\caption{Правила вывода.}
\label{table:inf-rules}
\end{table}

\newpage

\section{Интерпретация}

Интерпретация контекстов:

\medskip
\begin{center}
\AxiomC{}
\UnaryInfC{$\ll \varnothing \vdash \rr = 1$}
\DisplayProof
\quad
\AxiomC{$\ll \Gamma \vdash A \rr = A \dotsb \Gamma$}
\RightLabel{, $x \notin \Gamma$}
\UnaryInfC{$\ll \Gamma, x : A \vdash \rr = \Gamma.A$}
\DisplayProof
\end{center}

для всех терминальных объектов $1$.

Интерпретация переменных:

\medskip
\begin{center}
\AxiomC{$\ll \Gamma \vdash A \rr = A \dotsb \Gamma$}
\RightLabel{, $x \notin \Gamma$}
\UnaryInfC{$\ll \Gamma, x : A \vdash x : A \rr = a : \pi_A^*(A) \dotsb \Gamma.A$}
\DisplayProof
\end{center}

где $a$ определяется как в следующей диаграме:
\[ \xymatrix@-1pc{ \Gamma.A \ar[rddd]_{id_{\Gamma.A}} \ar[rrrd]^{id_{\Gamma.A}} \ar@{-->}[rd]_a & & & \\
                        & \Gamma.A.\pi_A^*(A) \ar[rr]_-{\pi_A.A} \ar[dd]^{\pi_{\pi_A^*(A)}} \pb & & \Gamma.A \ar[dd]^{\pi_A} \\
                        &                                                                       & & \\
                        & \Gamma.A \ar[rr]_{\pi_A}                                              & & \Gamma
                 }\]

\medskip
\begin{center}
\AxiomC{$\ll \Gamma \vdash x : A \rr = a : A \dotsb \Gamma$}
\AxiomC{$\ll \Gamma \vdash B \rr = B \dotsb \Gamma$}
\RightLabel{, $y \notin \Gamma$}
\BinaryInfC{$\ll \Gamma, y : B \vdash x : A \rr = a' : \pi_B^*(A) \dotsb \Gamma.B$}
\DisplayProof
\end{center}

где $a'$ определяется как в следующей диаграме:
\[ \xymatrix@-1pc{ \Gamma.B \ar[rddd]_{id_{\Gamma.B}} \ar[rrrd]^{a \circ \pi_B} \ar@{-->}[rd]_{a'} & & & \\
                        & \Gamma.B.\pi_B^*(A) \ar[rr]_-{\pi_B.A} \ar[dd]^{\pi_{\pi_B^*(A)}} \pb & & \Gamma.A \ar[dd]^{\pi_A} \\
                        &                                                                       & & \\
                        & \Gamma.B \ar[rr]_{\pi_B}                                              & & \Gamma
                 }\]

Интерпретация правила замены типа:

\medskip
\begin{center}
\AxiomC{$\ll \Gamma \vdash a : A \rr = a : A \dotsb \Gamma$}
\AxiomC{$\ll \Gamma \vdash A \deq B \rr = h : \Gamma.A \to \Gamma.B$}
\BinaryInfC{$\ll \Gamma \vdash a : B \rr = h \circ a : B \dotsb \Gamma$}
\DisplayProof
\end{center}

Интерпретация правил редукций типов:

\medskip
\begin{center}
\AxiomC{$\ll \Gamma \vdash A \red B \rr = h : A \to B \dotsb \Gamma$}
\UnaryInfC{$\ll \Gamma \vdash A \deq B \rr = h : A \to B \dotsb \Gamma$}
\DisplayProof
\quad
\AxiomC{$\ll \Gamma \vdash A \deq B \rr = h : A \to B \dotsb \Gamma$}
\UnaryInfC{$\ll \Gamma \vdash B \deq A \rr = h^{-1} : B \to A \dotsb \Gamma$}
\DisplayProof
\end{center}

для всех гомотопически обратных к $h$ отображений $h^{-1}$.

\medskip
\begin{center}
\AxiomC{$\ll \Gamma \vdash A \deq B \rr = h_1 : A \to B \dotsb \Gamma$}
\AxiomC{$\ll \Gamma \vdash B \deq C \rr = h_2 : B \to C \dotsb \Gamma$}
\BinaryInfC{$\ll \Gamma \vdash A \deq C \rr = h_2 \circ h_1 : A \to C \dotsb \Gamma$}
\DisplayProof
\end{center}

Интерпретация правил редукций термов:

\medskip
\begin{center}
\AxiomC{$\ll \Gamma \vdash a \red a' : A \rr = h : I \to A \dotsb \Gamma$}
\UnaryInfC{$\ll \Gamma \vdash a \deq a' : A \rr = h : I \to A \dotsb \Gamma$}
\DisplayProof
\end{center}

\medskip
\begin{center}
\AxiomC{$\ll \Gamma \vdash a \deq a' : A \rr = h : I \to A \dotsb \Gamma$}
\UnaryInfC{$\ll \Gamma \vdash a' \deq a : A \rr = h' : I \to A \dotsb \Gamma$}
\DisplayProof
\end{center}

где $h' : \Gamma \times I \to \Gamma.A$ определяется следующим образом:
\[ \xymatrix{ \Gamma \amalg \Gamma \ar[rrr]^{[\langle id_\Gamma, i_1 \rangle, \langle id_\Gamma, i_0 \rangle]} \ar[d]_{[\langle id_\Gamma, i_0 \rangle, \langle id_\Gamma, i_1 \rangle]} & & & \Gamma \times I \ar[r]^h & \Gamma.A \\
              \Gamma \times I \ar@{-->}[urrrr]_{h'}
            }\]

\medskip
\begin{center}
\AxiomC{$\ll \Gamma \vdash a \deq a' : A \rr = h_1 : I \to A \dotsb \Gamma$}
\AxiomC{$\ll \Gamma \vdash a' \deq a'' : A \rr = h_2 : I \to A \dotsb \Gamma$}
\BinaryInfC{$\ll \Gamma \vdash a \deq a'' : A \rr = h_3 : I \to A \dotsb \Gamma$}
\DisplayProof
\end{center}

Данное правило применимо при условии, что $h_1 \circ (id_\Gamma \times i_1) = h_2 \circ (id_\Gamma \times i_0)$.
Определим $h_3$ в несколько шагов.
Пусть $a,a',a'' : \Gamma \to \Gamma.A$ определяются соответственно как $h_1 \circ (id_\Gamma \times i_0)$, $h_1 \circ (id_\Gamma \times i_1)$ и $h_2 \circ (id_\Gamma \times i_1)$.
Пусть $\Gamma.A \xrightarrow{t} P(\Gamma.A) \xrightarrow{\langle p_1, p_2 \rangle} \Gamma.A \times \Gamma.A$ - объект путей для $\Gamma.A$.

Во-первых, определим $h'_1 : \Gamma \to P(\Gamma.A)$ как композицию $p \circ \langle id_\Gamma, i_1 \rangle$, где $p$ определяется следующим образом:
\[ \xymatrix{ \Gamma \ar[r]^-a \ar[d]_{\langle id_\Gamma, i_0 \rangle} & \Gamma.A \ar[r]^-t & P(\Gamma.A) \ar[d]^{\langle p_1, p_2 \rangle} \\
              \Gamma \times I \ar[rr]_-{\langle h_1 \circ \langle id_\Gamma, i_0 \rangle \circ \pi_1, h_1 \rangle} \ar@{-->}[urr]^p & & \Gamma.A \times \Gamma.A
            }\]
Во-вторых, определим $h'_3 : \Gamma \to P(\Gamma.A)$ как композицию $q \circ \langle id_\Gamma, i_1 \rangle$, где $q$ определяется следующим образом:
\[ \xymatrix{ \Gamma \ar[rr]^{h'_1} \ar[d]_{\langle id_\Gamma, i_0 \rangle}                  & & P(\Gamma.A) \ar[d]^{\langle p_1, p_2 \rangle} \\
              \Gamma \times I \ar[rr]_-{\langle a \circ \pi_1, h_2 \rangle} \ar@{-->}[urr]^q & & \Gamma.A \times \Gamma.A
            }\]
Теперь определим $h_3 : \Gamma \times I \to \Gamma.A$ как композицию $p_2 \circ s$, где $s$ определяется следующим образом:
\[ \xymatrix{ \Gamma \amalg \Gamma \ar[rr]^{[t \circ a, h'_3]} \ar[d] & & P(\Gamma.A) \ar[d]^{p_1} \\
              \Gamma \times I \ar[r]_-{\pi_1} \ar@{-->}[urr]^s & \Gamma \ar[r]_-a & \Gamma.A
            }\]

\bibliographystyle{amsplain}
\bibliography{ref}

\end{document}
