\documentclass[reqno]{amsart}

\usepackage{amssymb}
\usepackage{hyperref}
\usepackage{mathtools}
\usepackage[all]{xy}
\usepackage{verbatim}
\usepackage{ifthen}
\usepackage{xargs}
\usepackage{bussproofs}
\usepackage{turnstile}
\usepackage{etex}
\usepackage{todonotes}

\hypersetup{colorlinks=true,linkcolor=blue}

\renewcommand{\turnstile}[6][s]
    {\ifthenelse{\equal{#1}{d}}
        {\sbox{\first}{$\displaystyle{#4}$}
        \sbox{\second}{$\displaystyle{#5}$}}{}
    \ifthenelse{\equal{#1}{t}}
        {\sbox{\first}{$\textstyle{#4}$}
        \sbox{\second}{$\textstyle{#5}$}}{}
    \ifthenelse{\equal{#1}{s}}
        {\sbox{\first}{$\scriptstyle{#4}$}
        \sbox{\second}{$\scriptstyle{#5}$}}{}
    \ifthenelse{\equal{#1}{ss}}
        {\sbox{\first}{$\scriptscriptstyle{#4}$}
        \sbox{\second}{$\scriptscriptstyle{#5}$}}{}
    \setlength{\dashthickness}{0.111ex}
    \setlength{\ddashthickness}{0.35ex}
    \setlength{\leasturnstilewidth}{2em}
    \setlength{\extrawidth}{0.2em}
    \ifthenelse{%
      \equal{#3}{n}}{\setlength{\tinyverdistance}{0ex}}{}
    \ifthenelse{%
      \equal{#3}{s}}{\setlength{\tinyverdistance}{0.5\dashthickness}}{}
    \ifthenelse{%
      \equal{#3}{d}}{\setlength{\tinyverdistance}{0.5\ddashthickness}
        \addtolength{\tinyverdistance}{\dashthickness}}{}
    \ifthenelse{%
      \equal{#3}{t}}{\setlength{\tinyverdistance}{1.5\dashthickness}
        \addtolength{\tinyverdistance}{\ddashthickness}}{}
        \setlength{\verdistance}{0.4ex}
        \settoheight{\lengthvar}{\usebox{\first}}
        \setlength{\raisedown}{-\lengthvar}
        \addtolength{\raisedown}{-\tinyverdistance}
        \addtolength{\raisedown}{-\verdistance}
        \settodepth{\raiseup}{\usebox{\second}}
        \addtolength{\raiseup}{\tinyverdistance}
        \addtolength{\raiseup}{\verdistance}
        \setlength{\lift}{0.8ex}
        \settowidth{\firstwidth}{\usebox{\first}}
        \settowidth{\secondwidth}{\usebox{\second}}
        \ifthenelse{\lengthtest{\firstwidth = 0ex}
            \and
            \lengthtest{\secondwidth = 0ex}}
                {\setlength{\turnstilewidth}{\leasturnstilewidth}}
                {\setlength{\turnstilewidth}{2\extrawidth}
        \ifthenelse{\lengthtest{\firstwidth < \secondwidth}}
            {\addtolength{\turnstilewidth}{\secondwidth}}
            {\addtolength{\turnstilewidth}{\firstwidth}}}
        \ifthenelse{\lengthtest{\turnstilewidth < \leasturnstilewidth}}{\setlength{\turnstilewidth}{\leasturnstilewidth}}{}
    \setlength{\turnstileheight}{1.5ex}
    \sbox{\turnstilebox}
    {\raisebox{\lift}{\ensuremath{
        \makever{#2}{\dashthickness}{\turnstileheight}{\ddashthickness}
        \makehor{#3}{\dashthickness}{\turnstilewidth}{\ddashthickness}
        \hspace{-\turnstilewidth}
        \raisebox{\raisedown}
        {\makebox[\turnstilewidth]{\usebox{\first}}}
            \hspace{-\turnstilewidth}
            \raisebox{\raiseup}
            {\makebox[\turnstilewidth]{\usebox{\second}}}
        \makever{#6}{\dashthickness}{\turnstileheight}{\ddashthickness}}}}
        \mathrel{\usebox{\turnstilebox}}}

\newcommand{\newref}[4][]{
\ifthenelse{\equal{#1}{}}{\newtheorem{h#2}[hthm]{#4}}{\newtheorem{h#2}{#4}[#1]}
\expandafter\newcommand\csname r#2\endcsname[1]{#3~\ref{#2:##1}}
\expandafter\newcommand\csname R#2\endcsname[1]{#4~\ref{#2:##1}}
\expandafter\newcommand\csname n#2\endcsname[1]{\ref{#2:##1}}
\newenvironmentx{#2}[2][1=,2=]{
\ifthenelse{\equal{##2}{}}{\begin{h#2}}{\begin{h#2}[##2]}
\ifthenelse{\equal{##1}{}}{}{\label{#2:##1}}
}{\end{h#2}}
}

\newref[section]{thm}{theorem}{Theorem}
\newref{lem}{lemma}{Lemma}
\newref{prop}{proposition}{Proposition}
\newref{cor}{corollary}{Corollary}
\newref{cond}{condition}{Condition}

\theoremstyle{definition}
\newref{defn}{definition}{Definition}
\newref{example}{example}{Example}

\theoremstyle{remark}
\newref{remark}{remark}{Remark}

\newcommand{\deq}{\equiv}
\newcommand{\cat}[1]{\mathbf{#1}}
\newcommand{\C}{\cat{C}}
\newcommand{\PAlg}[1]{#1\text{-}\cat{PAlg}}
\newcommand{\Mod}[1]{#1\text{-}\cat{Mod}}
\newcommand{\Th}{\cat{Th}}
\newcommand{\algtt}{\cat{AlgTT}}
\newcommand{\ThC}{\Th_{\mathcal{C}}}
\newcommand{\emptyCtx}{\mathbf{1}}
\newcommand{\tta}{\mathbb{T}_0}
\newcommand{\tts}{\mathbb{T}_1}

\newcommand{\we}{\mathcal{W}}
\newcommand{\fib}{\mathcal{Fib}}
\newcommand{\cof}{\mathcal{Cof}}
\newcommand{\I}{\mathrm{I}}
\newcommand{\J}{\mathrm{J}}
\newcommand{\class}[2]{#1\text{-}\mathrm{#2}}
\newcommand{\Iinj}[1][\I]{\class{#1}{inj}}
\newcommand{\Icell}[1][\I]{\class{#1}{cell}}
\newcommand{\Icof}[1][\I]{\class{#1}{cof}}
\newcommand{\Jinj}[1][]{\Iinj[\J#1]}
\newcommand{\Jcell}[1][]{\Icell[\J#1]}
\newcommand{\Jcof}[1][]{\Icof[\J#1]}

\numberwithin{figure}{section}

\newcommand{\pb}[1][dr]{\save*!/#1-1.2pc/#1:(-1,1)@^{|-}\restore}
\newcommand{\po}[1][dr]{\save*!/#1+1.2pc/#1:(1,-1)@^{|-}\restore}

\begin{document}

\title{Models of Algebraic Dependent Type Theories}

\author{Valery Isaev}

\begin{abstract}
\end{abstract}

\maketitle

 \makeatletter
    \providecommand\@dotsep{5}
  \makeatother
  \listoftodos\relax

\section{Introduction}

\section{Functors between categories of models and theories}

In this section we will prove that the category of models of $\mathbb{T}$ is a coreflective full subcategory of theories under $\mathbb{T}$.

Let $\mathbb{T} = ((\mathcal{S},\mathcal{F},\mathcal{P}),\mathcal{A})$ be a standard partial Horn theory and let $M = (A,\alpha,\beta)$ be its model.
If $\sigma \in \mathcal{F}$, $\sigma : s_1 \times \ldots \times s_k \to s$, then we will write $M(\sigma) : A_{s_1} \times \ldots A_{s_k} \to A_s$
    for the partial function defined as $M(\sigma)(a_1, \ldots a_k) = \alpha(x_i \mapsto a_i)(\sigma(x_1, \ldots x_k))$.
If $R \in \mathcal{P}$, $R : s_1 \times \ldots \times s_k$ then we will write $M(R)$ for the subset of $A_{s_1} \times \ldots A_{s_k}$,
    which consists of tuples $(a_1, \ldots a_k)$ such that $\beta(x_i \mapsto a_i)(R(x_1, \ldots x_k)) = \top$.

For every model $M$ of $\mathbb{T}$, we define a theory $Lang(M)$.
It has function and predicate symbols of $\mathbb{T}$ together with function symbol $O_a : s$ for every $a \in A_s$.
Axioms of $Lang(M)$ are axioms of $\mathbb{T}$ together with the following sequents:
\begin{align*}
& \sststile{}{} O_a \downarrow \\
& \sststile{}{} \sigma(O_{a_1}, \ldots O_{a_k}) = O_{M(\sigma)(a_1, \ldots a_k)} \\
& \sststile{}{} R(O_{a_1}, \ldots O_{a_k})
\end{align*}
for every $a \in A_s$, every $a_i \in A_{s_i}$,
every $\sigma \in \mathcal{F}$ such that $M(\sigma)(a_1, \ldots a_k)$ is defined,
and every $R \in \mathcal{P}$ such that $(a_1, \ldots a_k) \in M(R)$.

Models of $Lang(M)$ are just models of $\mathbb{T}$ together with a morphism from $M$.
That is, categories $M/\Mod{\mathbb{T}}$ and $\Mod{Lang(M)}$ are isomorphic.
In particular, $A$ has a natural structure of a model of $Lang(M)$ defined as follows:
\begin{align*}
\alpha'(f)(O_a) & = a \\
\alpha'(f)(\sigma(x_1, \ldots x_k)) & = \alpha(f)(\sigma(x_1, \ldots x_k)) \\
\beta'(f)(R(x_1, \ldots x_k)) & = \beta(f)(R(x_1, \ldots x_k))
\end{align*}

\begin{lem}[cl-term]
If $t \in Term_\mathcal{F}(\varnothing)_s$ is such that $\sststile{}{} t \downarrow$ is a theorem of $Lang(M)$,
    then there is a unique $a \in A_s$ such that $\sststile{}{} t = O_a$ is a theorem of $Lang(M)$.
\end{lem}
\begin{proof}
Since $(A,\alpha',\beta')$ is a model of $Lang(M)$, for every theorem $\varphi \sststile{}{V} \psi$ of $Lang(M)$
    and every total function $f : V \to A$, if $\beta'(f)(\varphi) = \top$, then $\beta'(f)(\psi) = \top$.
In particular, if $\sststile{}{} O_a = O_{a'}$, then $a = a'$.
Hence if $\sststile{}{} t = O_a$ and $\sststile{}{} t = O_{a'}$, then $a = a'$, so such $a$ is unique.

Let us prove its existence.
We do this by induction on $t$.
If $t = O_a$, then we are done.
If $t = \sigma(t_1, \ldots t_k)$, then by induction hypothesis, $\sststile{}{} t = \sigma(O_{a_1}, \ldots O_{a_k})$ for some $a_1$, \ldots $a_k$.
Note that if $\sststile{}{} \sigma(O_{a_1}, \ldots O_{a_k})\!\!\downarrow$ is derivable, then $M(\sigma)(a_1, \ldots a_k)$ is defined.
Thus $\sststile{}{} \sigma(O_{a_1}, \ldots O_{a_k}) = O_{M(\sigma)(a_1, \ldots a_k)}$ is also derivable.
\end{proof}

For every morphism $h : M \to N$ of models of $\mathbb{T}$, we can define a morphism $Lang(h) : Lang(M) \to Lang(N)$ of theories under $\mathbb{T}$ as $Lang(h)(O_a) = O_{h(a)}$.
Thus $Lang$ is a functor $\Mod{\mathbb{T}} \to \mathbb{T}/\Th_\mathcal{S}$.

\begin{prop}
$Lang$ is fully faithful.
\end{prop}
\begin{proof}
Let $h_1$, $h_2$ be morphisms of models such that $Lang(h_1) = Lang(h_2)$.
Then $O_{h_1(a)} = Lang(h_1)(O_a) = Lang(h_2)(O_a) = O_{h_2(a)}$, and by \rlem{cl-term}, $h_1(a) = h_2(a)$.
Thus $Lang$ is faithful.

Let $M_1 = (A_1,\alpha_1,\beta_1)$ and $M_2 = (A_2,\alpha_2,\beta_2)$ be models of $\mathbb{T}$,
    and let $h : Lang(M_1) \to Lang(M_2)$ be a morphism of theories under $\mathbb{T}$.
Then by \rlem{cl-term}, for every $a \in A_1$, there is a unique $h'(a) \in A_2$ such that $\sststile{}{} h(O_a) = O_{h'(a)}$ is a theorem of $Lang(M_2)$.
Let us show that $h' : A_1 \to A_2$ is a morphism of models $M_1$ and $M_2$.
Indeed, if $M_1(\sigma)(a_1, \ldots a_k)$ is defined, then $\sststile{}{} \sigma(O_{a_1}, \ldots O_{a_k}) = O_{M_1(\sigma)(a_1, \ldots a_k)}$ is a theorem of $Lang(M_1)$.
Hence \[ \sststile{}{} \sigma(O_{h'(a_1)}, \ldots O_{h'(a_k)}) = O_{h'(M_1(\sigma)(a_1, \ldots a_k))} \] is a theorem of $Lang(M_2)$.
But \[ \sststile{}{} \sigma(O_{h'(a_1)}, \ldots O_{h'(a_k)}) = O_{M_2(\sigma)(h'(a_1), \ldots h'(a_k))} \] is also a theorem of $Lang(M_2)$.
Hence by \rlem{cl-term}, $h'(M_1(\sigma)(a_1, \ldots a_k)) = M_2(\sigma)(h'(a_1), \ldots h'(a_k))$.

If $(a_1, \ldots a_k) \in M_1(R)$, then $\sststile{}{} R(O_{a_1}, \ldots O_{a_k})$ is a theorem of $Lang(M_1)$.
Hence $\sststile{}{} R(O_{h'(a_1)}, \ldots O_{h'(a_k)})$ is a theorem of $Lang(M_2)$.
Since $M_2$ is a model of $Lang(M_2)$, it follows that $(h'(a_1), \ldots h'(a_k)) \in M_2(R)$.

Thus $h'$ is a morphism of models.
Note that by definition of $h'$, $Lang(h') = h$.
Hence $Lang$ is full.
\end{proof}

Now, let us describe a functor $Syn : \mathbb{T}/\Th_\mathcal{S} \to \Mod{\mathbb{T}}$.
For every $i : \mathbb{T} \to \mathbb{T}'$, let $Syn(i) = i^*(0_{\mathbb{T}'})$, where $0_{\mathbb{T}'}$ is the initial object of $\Mod{\mathbb{T}'}$,
    and $i^* : \Mod{\mathbb{T}'} \to \Mod{\mathbb{T}}$ is the functor that was defined in \cite{alg-tt}.
If $f : \mathbb{T}_1 \to \mathbb{T}_2$ is a morphism of theories under $\mathbb{T}$, then let $Syn(f) = i_1^*(!_{f^*(0_{\mathbb{T}_2})})$,
    where $!_{f^*(0_{\mathbb{T}_2})}$ is the unique morphism $0_{\mathbb{T}_1} \to f^*(0_{\mathbb{T}_2})$.

The construction of initial models of partial Horn theories was given in \cite{PHL}.
Let us repeat it here.
Let $\mathbb{T} = ((\mathcal{S},\mathcal{F},\mathcal{P}),\mathcal{A})$ be a standard partial Horn theory.
First, we define a partial equivalence relations on sets $Term_\mathcal{F}(\varnothing)$ as $t_1 \sim t_2$ if and only if $\sststile{}{} t_1 = t_2$ is a theorem of $\mathbb{T}$.
The interpretation of $R \in \mathcal{P}$ consists of tuples $(t_1, \ldots t_k)$ such that $\sststile{}{} R(t_1, \ldots t_k)$ is derivable in $\mathbb{T}$.
Then $\mathcal{S}$-set $Term_\mathcal{F}(\varnothing)/\!\sim$ has a natural structure of a model of $((\mathcal{S},\mathcal{F},\mathcal{P}),\mathcal{A})$, and this model is initial.

\begin{prop}
$Syn$ is right adjoint to $Lang$.
\end{prop}
\begin{proof}
Let $\epsilon_{\mathbb{T}'} : Lang(Syn(\mathbb{T}')) \to \mathbb{T}'$ be defined as $\epsilon_{\mathbb{T}'}(O_t) = t$.
It is easy to see that $\epsilon_{\mathbb{T}'}$ preserves axioms of $Lang(Syn(\mathbb{T}'))$.
Moreover, $\epsilon$ is natural in $\mathbb{T}'$.
Let us prove that $\epsilon$ is the counit of the adjunction.
Let $f : Lang(M) \to \mathbb{T}'$ be a morphism.
Then we need to show that there is a unique morphism $g : Lang(M) \to Lang(Syn(\mathbb{T}'))$ such that $\epsilon_{\mathbb{T}'} \circ g = f$.
By \rlem{cl-term}, there is a unique $t$ such that $g(O_a) = O_t$.
Since $t = \epsilon_{\mathbb{T}'}(g(O_a)) = f(O_a)$, $g$ must satisfy equation $g(O_a) = O_{f(O_a)}$.
Thus $g$ is unique.
It is easy to see that this $g$ preserves axioms of $Lang(M)$; hence it defines a morphism $g : Lang(M) \to Lang(Syn(\mathbb{T}'))$.
\end{proof}

Let $\mathbb{T}$ be an algebraic dependent type theory.
Then categories $\mathbb{T}/\algtt^0$ and $\mathbb{T}/\ThC$ are isomorphic.
Thus we still have adjoint functors $Lang^0 \dashv Syn^0 : \mathbb{T}/\algtt^0 \to \Mod{\mathbb{T}}$.
If $\mathbb{T}$ is a contextual theory, then category $\mathbb{T}/\algtt^0_{con}$ is a full subcategory of $\mathbb{T}/\algtt^0$.
We have functor $Syn^0_{con} : \mathbb{T}/\algtt^0_{con} \to \Mod{\mathbb{T}}$ which is defined as the composition of the inclusion $\mathbb{T}/\algtt^0_{con} \to \mathbb{T}/\algtt^0$ and $Syn$.
Let us construct its left adjoint $Lang^0_{con} : \Mod{\mathbb{T}} \to \mathbb{T}/\algtt^0_{con}$.

Theory $Lang^0_{con}(M)$ has has function and predicate symbols of $\mathbb{T}$ together with function symbol $O_a : (ctx,n) \to (p,n)$ for every $a \in A_{(p,n)}$, $p \in \{ ty, tm \}$.
For every $a \in A_{(p,n)}$, we define term $C_a$ of sort $(p,n)$ by induction on $n$.
If $n = 0$, then let $C_a = O_a(\emptyCtx)$.
If $n > 0$, then let $C_a = O_a(C_{M(ctx_{p,n})(a)})$.

Axioms of $Lang^0_{con}(M)$ are axioms of $\mathbb{T}$ together with the following sequents:
\begin{align*}
O_a(\Gamma) \downarrow & \sststile{}{\Gamma} \Gamma = C_{M(ctx_{p,n})(a)}\\
& \sststile{}{} \sigma(C_{a_1}, \ldots C_{a_k}) = C_{M(\sigma)(a_1, \ldots a_k)} \\
& \sststile{}{} R(C_{a_1}, \ldots C_{a_k})
\end{align*}
for every $a \in A_s$, every $a_i \in A_{s_i}$,
every $\sigma \in \mathcal{F}$ such that $M(\sigma)(a_1, \ldots a_k)$ is defined,
and every $R \in \mathcal{P}$ such that $(a_1, \ldots a_k) \in M(R)$.

For every morphism $h : M \to N$ of models of $\mathbb{T}$, we can define a morphism $Lang^0_{con}(h) : Lang^0_{con}(M) \to Lang^0_{con}(N)$ of theories under $\mathbb{T}$ as $Lang(h)(O_a(\Gamma)) = O_{h(a)}(\Gamma)$.
Thus $Lang^0_{con}$ is a functor $\Mod{\mathbb{T}} \to \mathbb{T}/\algtt^0_{con}$.

\begin{prop}
$Lang^0_{con}$ is left adjoint to $Syn^0_{con}$.
\end{prop}
\begin{proof}
To prove this, it is enough to show that the composition of $Lang^0_{con}$ and the inclusion $\mathbb{T}/\algtt^0_{con} \to \mathbb{T}/\algtt^0$ is isomorphic to $Lang^0$.
Let $\alpha_M : Lang^0(M) \to Lang^0_{con}(M)$ be defined as $\alpha_M(O_a) = C_a$.
Let $\beta_M : Lang^0_{con}(M) \to Lang^0(M)$ be defined as $\beta_M(O_a(\Gamma)) = O_a|_{\Gamma = C_{M(ctx_{p,n})(a)}}$.
To prove that $\alpha$ and $\beta$ are inverses of each other, we need to show that $\sststile{}{\Gamma} O_a(\Gamma) \cong C_a|_{\Gamma = C_{M(ctx_{p,n})(a)}}$ is a theorem of $Lang^0_{con}(M)$.
But this follows from the first axiom of $Lang^0_{con}(M)$.
\end{proof}

For every algebraic dependent type theory with substitutions $\mathbb{T}$, there are adjoint functors $Lang^1 \dashv Syn^1 : \mathbb{T}/\algtt^1 \to \Mod{\mathbb{T}}$.
For every contextual algebraic dependent type theory with substitutions $\mathbb{T}$, there are adjoint functors $Lang^1_{con} \dashv Syn^1_{con} : \mathbb{T}/\algtt^1_{con} \to \Mod{\mathbb{T}}$.
These functors are defined in the same way as $Lang^0 \dashv Syn^0$ and $Lang^0_{con} \dashv Syn^0_{con}$.

For every morphism of theories $f : \mathbb{T} \to \mathbb{T}'$ there is a functor $f^* : \Mod{\mathbb{T}'} \to \Mod{\mathbb{T}}$ which was consttucted in \cite{alg-tt}.
We also can define functor $f_* : \Mod{\mathbb{T}} \to \Mod{\mathbb{T}'}$ as $f_*(M) = Syn(Lang(M) \amalg_{\mathbb{T}} \mathbb{T}')$.
It was shown in \cite{PHL} that $f_*$ is left adjoint to $f^*$.
This theorem was proved there only for a weaker notion of morphisms of theories, but the proof also works for general morphisms as defined in \cite{alg-tt}.

Functor $f_*$ can be used to present a model of a theory by generators and relations.
Let $\mathbb{T}$ be a fixed $\mathcal{S}$-theory.
Note that models of the empty theory are just $\mathcal{S}$-sets.
If $f : 0 \to \mathbb{T}$ is the unique morphism from the empty theory, then $f^*(M)$ is just the underlying $\mathcal{S}$-set of $M$,
    and $f_*(X)$ is the free model of $\mathbb{T}$ on $\mathcal{S}$-set $X$.
We will denote this free model by $F(X)$.
If $R$ is a set of axioms in the language of theory $Lang(X) \amalg \mathbb{T}$,
    then let $F(X,R)$ be a model of $\mathbb{T}$ defined as $Syn(Lang(X) \amalg \mathbb{T} \cup R)$.
By definition of $Syn$, to construct a morphism $F(X,R) \to M$ it is necessary and sufficient
    to construct a morphism from $X$ to the underlying $\mathcal{S}$-set of $M$ such that relations from $R$ are true in $M$.

Sometimes we will omit the set of generators if it can be inferred from the set of relations.
For examples, we will write $F(\{\,\vdash p : Id(A,a,a')\,\})$ for the model $F(\{\,a : (tm,0), a' : (tm,0), A : (ty,0), p : (tm,0)\,\}, \{\,ty(p) = Id(A,a,a')\,\})$.
Another examples is $F(\{\,A_1, \ldots A_n \vdash a : A\,\})$ which equals to $F(\{\,A_i : (ty,i), A : (ty,n), a : (tm,n)\,\}, \{\,ty(a) = A, ft^{i+1}(A) = A_{n-i}\,\})$.
Thus this model is isomorphic to the free model $F(\{\,a : (tm,n)\,\})$.

\section{A model structure on models of theories with $\Pi$-types}

In this section we construct a model structure on the category of models of an algebraic type theory with enough additional structure.

Let $I_0$ be a theory with function symbols $I : (ty,0)$, $left : (tm,0)$, $right : (tm,0)$, and $coe : (ty,1) \times (tm,0) \times (tm,0) \to (tm,0)$, and the following axioms:
\begin{center}
\AxiomC{}
\UnaryInfC{$\vdash I\ type$}
\DisplayProof
\quad
\AxiomC{}
\UnaryInfC{$\vdash left : I$}
\DisplayProof
\quad
\AxiomC{}
\UnaryInfC{$\vdash right : I$}
\DisplayProof
\end{center}

\medskip
\begin{center}
\AxiomC{$I \vdash D\ type$}
\AxiomC{$\vdash d : D[left]$}
\AxiomC{$\vdash i : I$}
\TrinaryInfC{$\vdash coe(D, d, i) : D[i]$}
\DisplayProof
\qquad
\AxiomC{$I \vdash D\ type$}
\AxiomC{$\vdash d : D[left]$}
\BinaryInfC{$\vdash coe(D, d, left) \deq d$}
\DisplayProof
\end{center}
Let $I$ be the regularization of $I_0$.
We will work with theories under $I$, which we call theories with \emph{an interval type}.

Let $HPath$ be a regular theory with function symbols $Path : (ty,n) \times (tm,n) \times (tm,n) \to (ty,n)$,
    $path : (tm,n+1) \to (tm,n)$, and $at : (tm,n) \times (tm,n) \times (tm,n) \times (tm,n) \to (tm,n)$, and the following axioms:
\begin{center}
\AxiomC{$\Gamma \vdash a : A$}
\AxiomC{$\Gamma \vdash a' : A$}
\BinaryInfC{$\Gamma \vdash Path(A, a, a')\ type$}
\DisplayProof
\quad
\AxiomC{$\Gamma \vdash A\ type$}
\AxiomC{$\Gamma, I \vdash a : A\!\uparrow$}
\BinaryInfC{$\Gamma \vdash path(a) : Path(A, a[left], a[right])$}
\DisplayProof
\end{center}

\smallskip
\begin{center}
\AxiomC{$\Gamma \vdash p : Path(A, a, a')$}
\AxiomC{$\Gamma \vdash i : I$}
\BinaryInfC{$\Gamma \vdash at(a, a', p, i) : A$}
\DisplayProof
\end{center}

\smallskip
\begin{center}
\AxiomC{$\Gamma \vdash A\ type$}
\AxiomC{$\Gamma, I \vdash a : A\!\uparrow$}
\AxiomC{$\Gamma \vdash i : I$}
\TrinaryInfC{$\Gamma \vdash at(a[left], a[right], path(a), i) \deq a[i]$}
\DisplayProof
\end{center}

\smallskip
\begin{center}
\AxiomC{$\Gamma \vdash p : Path(A, a, a')$}
\UnaryInfC{$\Gamma \vdash at(a, a', p, left) \deq a$}
\DisplayProof
\quad
\AxiomC{$\Gamma \vdash p : Path(A, a, a')$}
\UnaryInfC{$\Gamma \vdash at(a, a', p, right) \deq a'$}
\DisplayProof
\end{center}
We will work with theories under $HPath$, which we call theories with \emph{homogeneous path types}.

We will also consider regular theory $UA$ under $HPath$, which has additional symbols
\[ iso : (ty,n)^2 \times (tm,n+1)^4 \times (tm,n) \to (ty,n) \]
and the following axioms:
\medskip
\begin{center}
\def\extraVskip{0.5pt}
\Axiom$\fCenter \Gamma \vdash i : I$
\noLine
\UnaryInf$\fCenter \Gamma \vdash A\ type$
\noLine
\UnaryInf$\fCenter \Gamma \vdash B\ type$
\Axiom$\fCenter \Gamma, A \vdash f : B\!\uparrow$
\noLine
\UnaryInf$\fCenter \Gamma, B \vdash g : A\!\uparrow$
\Axiom$\fCenter \Gamma, A \vdash p : Path(A\!\uparrow, subst(g, v_n, \ldots v_1, f), v_0)$
\noLine
\UnaryInf$\fCenter \Gamma, B \vdash q : Path(B\!\uparrow, subst(f, v_n, \ldots v_1, g), v_0)$
\def\extraVskip{2pt}
\TrinaryInfC{$\Gamma \vdash iso(A, B, f, g, p, q, i)\ type$}
\DisplayProof
\end{center}

\medskip
\begin{center}
\def\extraVskip{0.5pt}
\Axiom$\fCenter \Gamma \vdash A\ type$
\noLine
\UnaryInf$\fCenter \Gamma \vdash B\ type$
\Axiom$\fCenter \Gamma, A \vdash f : B\!\uparrow$
\noLine
\UnaryInf$\fCenter \Gamma, B \vdash g : A\!\uparrow$
\Axiom$\fCenter \Gamma, A \vdash p : Path(A\!\uparrow, subst(g, v_n, \ldots v_1, f), v_0)$
\noLine
\UnaryInf$\fCenter \Gamma, B \vdash q : Path(B\!\uparrow, subst(f, v_n, \ldots v_1, g), v_0)$
\def\extraVskip{2pt}
\TrinaryInfC{$\Gamma \vdash iso(A, B, f, g, p, q, left) \deq A$}
\DisplayProof
\end{center}

\medskip
\begin{center}
\def\extraVskip{0.5pt}
\Axiom$\fCenter \Gamma \vdash A\ type$
\noLine
\UnaryInf$\fCenter \Gamma \vdash B\ type$
\Axiom$\fCenter \Gamma, A \vdash f : B\!\uparrow$
\noLine
\UnaryInf$\fCenter \Gamma, B \vdash g : A\!\uparrow$
\Axiom$\fCenter \Gamma, A \vdash p : Path(A\!\uparrow, subst(g, v_n, \ldots v_1, f), v_0)$
\noLine
\UnaryInf$\fCenter \Gamma, B \vdash q : Path(B\!\uparrow, subst(f, v_n, \ldots v_1, g), v_0)$
\def\extraVskip{2pt}
\TrinaryInfC{$\Gamma \vdash iso(A, B, f, g, p, q, right) \deq B$}
\DisplayProof
\end{center}

\medskip
\begin{center}
\def\extraVskip{0.5pt}
\Axiom$\fCenter \Gamma \vdash A\ type$
\noLine
\UnaryInf$\fCenter \Gamma \vdash B\ type$
\Axiom$\fCenter \Gamma, A \vdash f : B\!\uparrow$
\noLine
\UnaryInf$\fCenter \Gamma, B \vdash g : A\!\uparrow$
\Axiom$\fCenter \Gamma, A \vdash p : Path(A\!\uparrow, subst(g, v_n, \ldots v_1, f), v_0)$
\noLine
\UnaryInf$\fCenter \Gamma, B \vdash q : Path(B\!\uparrow, subst(f, v_n, \ldots v_1, g), v_0)$
\def\extraVskip{2pt}
\TrinaryInfC{$\Gamma \vdash coe(iso(A\!\uparrow, B\!\uparrow, f\!\uparrow_1, g\!\uparrow_1, p\!\uparrow_1, q\!\uparrow_1, v_0), a, right) \deq f[a]$}
\DisplayProof
\end{center}

This theory is an analog of the univalence axiom, but it is defined for all types.
The univalence axiom for a universe follows from the assumption that this universe is closed under $iso$.

Let $\mathbb{T}$ be a theory under $UA$.
Then we define a model structure on the category of models of $\mathbb{T}$.
For an introduction to the theory of model categories see \cite{hovey}.
We will need the following proposition to construct our model structure:

\begin{prop}[model-cat]
Suppose that $\C$ is a complete and cocomplete category, $\we$ is a class of morphisms of $\C$, and $\I$, $\J$ are sets of morphisms of $\C$.
Then $\C$ is a cofibrantly generated model category with $\I$ as the set of generating cofibrations,
$\J$ as the set of generating trivial cofibrations, and $\we$ as the class of weak equivalences if and only if the following conditions are satisfied:
\begin{description}
\item[(A1)] The domains of maps in $\I$ and $\J$ are small relative to $\Icell$ and $\Jcell$ respectively.
\item[(A2)] $\we$ has 2-out-of-3 property and is closed under retracts.
\item[(A3)] $\Iinj \subseteq \we$.
\item[(A4)] $\Jcell \subseteq \we \cap \Icof$.
\item[(A5)] Either $\Jinj \cap \we \subseteq \Iinj$ or $\Icof \cap \we \subseteq \Jcof$.
\end{description}
\end{prop}

Let $\I_{ty}$ be the set of arrows of the form $F(\{\,\Gamma : (ctx,n)\,\}) \to F(\{\,A : (ty,n)\,\})$, where $\Gamma$ is mapped to $ft(A)$.
Let $\I_{tm}$ be the set of arrows of the form $F(\{\,A : (ty,n)\,\}) \to F(\{\,a : (tm,n)\,\})$, where $A$ is mapped to $ty(a)$.
We define the set $\I$ of generating cofibrations to be the union $\I_{ty} \cup \I_{tm}$.

If $p \in \{ ty, tm\}$, then a \emph{cylinder object} of sort $(p,n)$ is $F(\{\,h : (p,n+1)\,\}, \{\,ctx(h) = I(ctx^2(h))\,\})$.
We will denote this object by $Cyl_{(p,n)}(h)$.
We have two inclusions $i^0_{(p,n)}, i^1_{(p,n)} : F(\{\,a : (p,n)\,\}) \to Cyl_{(p,n)}(h)$, where $i^0_{(p,n)}(a) = h[left]$ and $i^1_{(p,n)}(a) = h[right]$.
Let $\J_p$ be the set of arrows of the form $i^0_{(p,n)}$.
We define the set $\J$ of generating trivial cofibrations to be the union $\J_{ty} \cup \J_{tm}$.

There is a bijection between morphisms $F(\{\,\Gamma \vdash a : A\,\}) \to M$ and $M_{(tm,n)}$, where $n$ is the length of $\Gamma$.
Thus we will identify these morphisms with elements of $M_{(tm,n)}$ and call them simply \emph{terms} of $M$.
There is a bijection between morphisms $F(\{\,\Gamma \vdash A\ type\,\}) \to M$ and $M_{(ty,n)}$, where $n$ is the length of $\Gamma$.
Thus we will identify these morphisms with elements of $M_{(ty,n)}$ and call them simply \emph{types} of $M$.

A \emph{homotopy between terms} $f,g : F(\{\,\Gamma \vdash a : A\,\}) \to M$ is a map $h : F(\{\,\Gamma, I \vdash a : A\,\}) \to M$ such that $h \circ i_0 = f$ and $h \circ i_1 = g$.
Terms $f$ and $g$ are \emph{homotopic} if there is a homotopy between them.
A \emph{homotopy between types} $f,g : F(\{\,\Gamma \vdash A\ type\,\}) \to M$ is a map $h : F(\{\,\Gamma, I \vdash A\ type\,\}) \to M$ such that $h \circ i_0 = f$ and $h \circ i_1 = g$.
Types $f$ and $g$ are \emph{homotopic} if there is a homotopy between them.

Let $\we$ be the set of 

\bibliographystyle{amsplain}
\bibliography{ref}

\end{document}
