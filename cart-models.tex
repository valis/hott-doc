\documentclass[reqno]{amsart}

\usepackage{amssymb}
\usepackage{hyperref}
\usepackage{mathtools}
\usepackage[all]{xy}
\usepackage{ifthen}
\usepackage{xargs}
\usepackage{bussproofs}
\usepackage{turnstile}
\usepackage{yfonts}
\usepackage{verbatim}

\hypersetup{colorlinks=true,linkcolor=blue}

\renewcommand{\turnstile}[6][s]
    {\ifthenelse{\equal{#1}{d}}
        {\sbox{\first}{$\displaystyle{#4}$}
        \sbox{\second}{$\displaystyle{#5}$}}{}
    \ifthenelse{\equal{#1}{t}}
        {\sbox{\first}{$\textstyle{#4}$}
        \sbox{\second}{$\textstyle{#5}$}}{}
    \ifthenelse{\equal{#1}{s}}
        {\sbox{\first}{$\scriptstyle{#4}$}
        \sbox{\second}{$\scriptstyle{#5}$}}{}
    \ifthenelse{\equal{#1}{ss}}
        {\sbox{\first}{$\scriptscriptstyle{#4}$}
        \sbox{\second}{$\scriptscriptstyle{#5}$}}{}
    \setlength{\dashthickness}{0.111ex}
    \setlength{\ddashthickness}{0.35ex}
    \setlength{\leasturnstilewidth}{2em}
    \setlength{\extrawidth}{0.2em}
    \ifthenelse{%
      \equal{#3}{n}}{\setlength{\tinyverdistance}{0ex}}{}
    \ifthenelse{%
      \equal{#3}{s}}{\setlength{\tinyverdistance}{0.5\dashthickness}}{}
    \ifthenelse{%
      \equal{#3}{d}}{\setlength{\tinyverdistance}{0.5\ddashthickness}
        \addtolength{\tinyverdistance}{\dashthickness}}{}
    \ifthenelse{%
      \equal{#3}{t}}{\setlength{\tinyverdistance}{1.5\dashthickness}
        \addtolength{\tinyverdistance}{\ddashthickness}}{}
        \setlength{\verdistance}{0.4ex}
        \settoheight{\lengthvar}{\usebox{\first}}
        \setlength{\raisedown}{-\lengthvar}
        \addtolength{\raisedown}{-\tinyverdistance}
        \addtolength{\raisedown}{-\verdistance}
        \settodepth{\raiseup}{\usebox{\second}}
        \addtolength{\raiseup}{\tinyverdistance}
        \addtolength{\raiseup}{\verdistance}
        \setlength{\lift}{0.8ex}
        \settowidth{\firstwidth}{\usebox{\first}}
        \settowidth{\secondwidth}{\usebox{\second}}
        \ifthenelse{\lengthtest{\firstwidth = 0ex}
            \and
            \lengthtest{\secondwidth = 0ex}}
                {\setlength{\turnstilewidth}{\leasturnstilewidth}}
                {\setlength{\turnstilewidth}{2\extrawidth}
        \ifthenelse{\lengthtest{\firstwidth < \secondwidth}}
            {\addtolength{\turnstilewidth}{\secondwidth}}
            {\addtolength{\turnstilewidth}{\firstwidth}}}
        \ifthenelse{\lengthtest{\turnstilewidth < \leasturnstilewidth}}{\setlength{\turnstilewidth}{\leasturnstilewidth}}{}
    \setlength{\turnstileheight}{1.5ex}
    \sbox{\turnstilebox}
    {\raisebox{\lift}{\ensuremath{
        \makever{#2}{\dashthickness}{\turnstileheight}{\ddashthickness}
        \makehor{#3}{\dashthickness}{\turnstilewidth}{\ddashthickness}
        \hspace{-\turnstilewidth}
        \raisebox{\raisedown}
        {\makebox[\turnstilewidth]{\usebox{\first}}}
            \hspace{-\turnstilewidth}
            \raisebox{\raiseup}
            {\makebox[\turnstilewidth]{\usebox{\second}}}
        \makever{#6}{\dashthickness}{\turnstileheight}{\ddashthickness}}}}
        \mathrel{\usebox{\turnstilebox}}}

\newcommand{\newref}[4][]{
\ifthenelse{\equal{#1}{}}{\newtheorem{h#2}[hthm]{#4}}{\newtheorem{h#2}{#4}[#1]}
\expandafter\newcommand\csname r#2\endcsname[1]{#3~\ref{#2:##1}}
\expandafter\newcommand\csname R#2\endcsname[1]{#4~\ref{#2:##1}}
\expandafter\newcommand\csname n#2\endcsname[1]{\ref{#2:##1}}
\newenvironmentx{#2}[2][1=,2=]{
\ifthenelse{\equal{##2}{}}{\begin{h#2}}{\begin{h#2}[##2]}
\ifthenelse{\equal{##1}{}}{}{\label{#2:##1}}
}{\end{h#2}}
}

\newref[section]{thm}{theorem}{Theorem}
\newref{lem}{lemma}{Lemma}
\newref{prop}{proposition}{Proposition}
\newref{cor}{corollary}{Corollary}
\newref{cond}{condition}{Condition}
\newref{conj}{conjecture}{Conjecture}

\theoremstyle{definition}
\newref{defn}{definition}{Definition}
\newref{example}{example}{Example}

\theoremstyle{remark}
\newref{rem}{remark}{Remark}

\newcommand{\deq}{\equiv}
\newcommand{\repl}{:=}
\newcommand{\idtype}{\rightsquigarrow}

\newcommand{\cat}[1]{\mathbf{#1}}
\newcommand{\C}{\cat{C}}
\newcommand{\Cat}{\cat{Cat}}
\newcommand{\Mod}[1]{#1\text{-}\cat{Mod}}
\newcommand{\Th}{\cat{Th}}
\newcommand{\emptyCtx}{\mathbf{1}}
\newcommand{\Set}{\cat{Set}}
\newcommand{\sSet}{\cat{sSet}}
\newcommand{\cSet}{\cat{cSet}}
\newcommand{\Hom}{\mathrm{Hom}}

\newcommand{\we}{\mathcal{W}}
\newcommand{\I}{\mathrm{I}}
\newcommand{\J}{\mathrm{J}}
\newcommand{\class}[2]{#1\text{-}\mathrm{#2}}
\newcommand{\Icell}[1][\I]{\class{#1}{cell}}
\newcommand{\Icof}[1][\I]{\class{#1}{cof}}
\newcommand{\Jcell}[1][]{\Icell[\J#1]}
\newcommand{\cyli}{i}

\numberwithin{figure}{section}

\newcommand{\pb}[1][dr]{\save*!/#1-1.2pc/#1:(-1,1)@^{|-}\restore}
\newcommand{\po}[1][dr]{\save*!/#1+1.2pc/#1:(1,-1)@^{|-}\restore}

\begin{document}

\title[Equivalence between quasicategories and models of type theory]{Equivalence between locally cartesian (closed) quasicategories and models of homotopy type theory}

\author{Valery Isaev}

\begin{abstract}
Abstract.
\end{abstract}

\maketitle

\section{Introduction}

\begin{comment}
\section{Cubically enriched categories}

In this section we recall the definition of the category $\Cat_\square$ of cubically enriched categories and Quillen adjunction between
the cateogry simplicial sets $\sSet$ (with Joyal model structure) and $\Cat_\square$.
We also define Quillen adjunction between $\Cat_\square$ and categories of models of suitable algebraic dependent type theories.

Let $D$ be poset $\{0,1\}$ where $0 \leq 1$.
For every $0 \leq n$, $1 \leq i \leq n+1$, $\epsilon \in D$, let $\delta^{i,\epsilon}_n : D^n \to D^{n+1}$ and $\sigma^i_n : D^{n+1} \to D^n$ be the following morphisms of posets:
\begin{align*}
\delta^{i,\epsilon}_n(x_1, \ldots x_n) & = (x_1, \ldots x_{i-1}, \epsilon, x_{i+1}, \ldots x_n) \\
\sigma^i_n(x_1, \ldots x_{n+1}) & = (x_1, \ldots x_{i-1}, x_{i+1}, \ldots x_{n+1})
\end{align*}
Category of cubes $\square$ is the subcategory of the category of posets on objects of the form $D^n$ generated by morphisms $\delta^{i,\epsilon}_n$ and $\sigma^i_n$.
Let $\cSet$ be the category of cubical sets $\Set^{\square^{op}}$.
Let $\square^n \in \cSet$ be the representable presheaf on $D^n$.
Let $d^{i,\epsilon}_n : \square^n \to \square^{n+1}$ and $s^i_n : \square^{n+1} \to \square^n$ be the maps represented by $\delta^{i,\epsilon}_n$ and $\sigma^i_n$.

There is a (unique) closed monoidal structure $(\otimes,1)$ on $\cSet$ such that $\square^n \otimes \square^m \cong \square^{n+m}$ and $1 = \square^0$ (see, for example, \cite{jardine}).
Let $X$ be an object of a cocomplete monoidal category $\C$.
Then there exists a (unique) colimit-preserving strong monoidal functor $F : \cSet \to \C$ such that $F(\square^1) = X$.
This functor has a right adjoint $G : \C \to \cSet$ given by formula $G(X) = \Hom_\C(F(y(-)),X)$, where $y : \square \to \cSet$ is the Yoneda embedding.
An examples of this construction is the adjunction $|-| : \cSet \rightleftarrows \sSet : S$ such that $|\square^1| = \Delta^1$.

For every $n \geq 0$, let $\partial \square^n$ be the following coequalizer:
\[ \coprod_{1 \leq i < j \leq n, \epsilon_1,\epsilon_2 \in D} \square^{n-2} \rightrightarrows \coprod_{1 \leq i \leq n, \epsilon \in D} \square^{n-1} \to \partial \square^n, \]
where one of the morphisms maps $(i,j,\epsilon_1,\epsilon_2)$-th component to $(i,\epsilon_1)$-th component by map $d^{j-1,\epsilon_2}_{n-2}$,
the other one maps $(i,j,\epsilon_1,\epsilon_2)$-th component to $(j,\epsilon_2)$-th component by map $d^{i,\epsilon_1}_{n-2}$,
Consider morphism $f : \coprod_{1 \leq i \leq n, \epsilon \in D} \square^{n-1}$ that is defined on $(i,\epsilon)$-th component by $d^{i,\epsilon}_{n-1}$.
Then this morphism determines a morphism $i^n : \partial \square^n \to \square^n$.

For every $n \geq 0$, $1 \leq i \leq n$, $\epsilon \in D$, let $\sqcap^n_{i,\epsilon}$ be the following coequalizer:
\[ \coprod_{\substack{1 \leq j_1 < j_2 \leq n, \gamma_1,\gamma_2 \in D, \\ (j_1,\gamma_1) \neq (i,\epsilon), (j_2,\gamma_2) \neq (i,\epsilon)}} \square^{n-2} \rightrightarrows \coprod_{\substack{1 \leq j \leq n, \gamma \in D, \\ (j,\gamma) \neq (i,\epsilon)}} \square^{n-1} \to \sqcap^n_{i,\epsilon}, \]
where morphisms are defined as before.
The restriction of $f$ determines a morphism $u^n_{i,\epsilon} : \sqcap^n_{i,\epsilon} \to \square^n$.

There is a model structure on $\cSet$ with maps $i^n : \partial \square^n \to \square^n$ as generating cofibrations
and maps $u^n_{i,\epsilon} : \sqcap^n_{i,\epsilon} \to \square^n$ as generating trivial cofibrations (see, for example, \cite[Example~52, Theorem~88]{jardine}).
Functors $|-| : \cSet \rightleftarrows \sSet : S$ determine a Quillen equivalence.

Let $\Cat_\Delta$ and $\Cat_\square$ be the categories of simplicially and cubically enriched categories respectively (that is, categories enriched in $\sSet$ and $\cSet$).
Bergner constructed a model structure on $\Cat_\Delta$ in \cite{bergner}.
Lurie generalized this construction (\cite[Proposition~A.3.2.4]{lurie-topos}).
In particular, this proposition applies to the category of cubically enriched categories.
To describe the class of cofibrations of this model category, we need too define a functor $ar : \cSet \to \Cat_\square$.
For every cubical set $A$, let $ar(A)$ be the cubically enriched category with two objects $X$ and $Y$ and $\Hom(X,Y) = A$, $\Hom(X,X) = \Hom(Y,Y) = 1$, $\Hom(Y,X) = \varnothing$.
The class of cofibrations is generated by the set of maps of the form $ar(i^n)$ and map $\varnothing \to 1$.

\begin{rem}
Fibrations in $\Cat_\square$ do not have simple description, but fibrant objects have.
Since the category of simplicial sets is excellent, the category of cubical sets is also excellent by \cite[Remark~A.3.2.21]{lurie-topos}.
By \cite[Theorem~A.3.2.24]{lurie-topos}, a cubically enriched category $C$ is fibrant
if and only if for every objects $X$ and $Y$ of $C$, $\Hom_C(X,Y)$ is a fibrant cubical set.
Also, a map $F : C \to D$ between cubically enriched categories, where $D$ is fibrant, is a fibration if and only if the following conditions are satisfied:
\begin{enumerate}
\item For every object $X$ and $Y$ of $C$, $\Hom_C(X,Y) \to \Hom_D(F(X),F(Y))$ is a fibration of cubical sets.
\item For every object $X$ of $C$ and every equivalence $f : F(X) \to Y$ in $D$, there exists an equivalence $f' : X \to Y'$ in $C$ such that $F(f') = f$.
\end{enumerate}
\end{rem}

There is a pair of adjoint functors $\textswab{C}_\Delta : \sSet \rightleftarrows \Cat_\Delta : N_\Delta$ which is defined in \cite[Section~1.1.5]{lurie-topos}.
We will need analogous functors for cubically enriched categories.
We define a cubically enriched category $\textswab{C}_\square(\Delta^n)$ as follows:
\begin{itemize}
\item The objects of $\textswab{C}_\square(\Delta^n)$ are natural numbers between $0$ and $n$.
\item For every $0 \leq j < i \leq n$, $\Hom_{\textswab{C}_\square(\Delta^n)}(i,j) = \varnothing$.
\item For every $0 \leq i \leq n$, $\Hom_{\textswab{C}_\square(\Delta^n)}(i,i) = 1$.
\item For every $0 \leq i < j \leq n$, $\Hom_{\textswab{C}_\square(\Delta^n)}(i,j) = \square^{j-i-1}$.
\item For every object $i$ of $\textswab{C}_\square(\Delta^n)$, the identity morphism on $i$ is the unique element of $\Hom_{\textswab{C}_\square(\Delta^n)}(i,i)$.
\item For every $0 \leq i < j < k \leq n$, the composition
\[ \Hom_{\textswab{C}_\square(\Delta^n)}(i,j) \otimes \Hom_{\textswab{C}_\square(\Delta^n)}(j,k) \to \Hom_{\textswab{C}_\square(\Delta^n)}(i,k) \]
is the composite $\square^{j-i-1} \otimes \square^{k-j-1} \cong \square^{k-i-2} \to \square^{k-i-1}$.
\end{itemize}
\end{comment}

\section{Functors between $\sSet$ and $\Mod{T}$}

In this section we define a Quillen adjunction between $\sSet$ and $\Mod{T}$ for every algebraic dependent type theory $T$ under $sq_l$.
Theory $sq_l$ was defined in \cite{alg-models}.
For every finite nonempty linearly ordered set $J$, we define a model $\textswab{C}(\Delta^J)$ of $T$.
It is freely generated by generators and relations described below.
Generators of $\textswab{C}(\Delta^J)$ are $O_j : (ty,0)$ for every $j \in J$, and $M_{J'} : (tm,|J'|-1)$ for every subset $J'$ of $J$ such that $|J'| \geq 2$.
For every $J' = \{ j_1 < \ldots < j_n \} \subseteq J$ such that $n \geq 2$, $\textswab{C}(\Delta^J)$ has the following relation:
\[ x : O_{j_1}, x_{j_2} : I, \ldots x_{j_{n-1}} : I \vdash M_{J'} : O_{j_n} \]
For every $j \notin J'$ such that $j_1 < j < j_n$, it has the following relations:
\begin{align}
x : O_{j_1}, x_{j_2} : I, \ldots x_{j_{n-1}} : I & \vdash M_{J' \cup \{j\}}[x_j \repl left] \deq M_{\{ j, \ldots j_n \}}[x \repl M_{\{ j_1, \ldots j \}}] \label{rel:left} \\
x : O_{j_1}, x_{j_2} : I, \ldots x_{j_{n-1}} : I & \vdash M_{J' \cup \{j\}}[x_j \repl right] \deq M_{J'} \label{rel:right}
\end{align}

The idea of this definition is similar to \cite[Definition~1.1.5.1]{lurie-topos}.
For every vertex $j$ of $\Delta^J$, we have a type $O_j$,
and for every $(n+1)$-dimensional face $J'$ of $\Delta^J$, we have an $n$-dimensional cube $M_{J'}$.
Relations describe faces of these cubes.

Let $sq_l(x_1, \ldots x_n) = sq_l(x_1, \ldots sq_l(x_{n-1},x_n) \ldots )$.
In particular, $sq_l(X) = x$ and $sq_l() = right$.
Now, we can extend $\textswab{C}$ to a functor $\Delta \to \Mod{T}$.
Let $f : J \to K$ be a monotone map between linearly ordered sets.
Then we define $\textswab{C}(f)$ as follows:
\begin{align*}
\textswab{C}(f)(O_j) & = O_{f(j)} \\
\textswab{C}(f)(M_{J'}) & =
\begin{cases}
    x                                                                  & \text{if } |f(J')| = 1 \\
    M_{f(J')}[\ \ldots\ x_{k_i} \repl sq_l(x_{f^{-1}(k_i)})\ \ldots\ ] & \text{if } |f(J')| > 1 \\
  \end{cases}
\end{align*}
where $k_i$ runs from $k_2$ to $k_{m-1}$, $\{ k_1 < \ldots < k_m \} = f(J')$,
and $x_{f^{-1}(k_i)} = x_{j_1}, \ldots x_{j_n}$, $\{ j_1 < \ldots < j_n \} = f^{-1}(k_i)$.

Let us check that $\textswab{C}(f)$ preserves relations.
Let $J' = \{ j_1 < \ldots < j_i < j < j_{i+1} < \ldots < j_n \}$ be a subset of $J$, and let $f'$ be the restriction of $f$ to $J'$.
If $|f(J')| = 1$, then $\textswab{C}(f)(M_{J' \cup \{j\}}[x_j \repl left]) = \textswab{C}(f)(M_{\{ j, \ldots j_n \}}[x \repl M_{\{ j_1, \ldots j \}}]) = \textswab{C}(f)(M_{J' \cup \{j\}}[x_j \repl right]) = \textswab{C}(f)(M_{J'}) = x$.
Thus we may assume that $|f(J')| > 1$. 

Let $\rho(x_{f(j_i)}) = sq_l(x_{f'^{-1}(f(j_1))})$ for every $1 \leq i \leq n$ such that $f(j_i) \neq f(j)$.
Let us consider the first relation.
If $f(j) = f(j_1)$, then
\begin{align*}
\textswab{C}(f)(M_{J' \cup \{j\}}[x_j \repl left]) & = \\
M_{f(J')}[\rho] & = \\
M_{\{ f(j), \ldots f(j_n) \}}[\rho][x \repl x] & = \\
\textswab{C}(f)(M_{\{ j, \ldots j_n \}}[x \repl M_{\{ j_1, \ldots j \}}]) & .
\end{align*}
If $f(j) = f(j_n)$, then
\begin{align*}
\textswab{C}(f)(M_{J' \cup \{j\}}[x_j \repl left]) & = \\
M_{f(J')}[\rho] & = \\
x[x \repl M_{\{f(j_1), \ldots f(j)\}}[\rho]] & = \\
\textswab{C}(f)(M_{\{ j, \ldots j_n \}}[x \repl M_{\{ j_1, \ldots j \}}]) & .
\end{align*}
If $f(j_1) < f(j) < f(j_n)$, then
\begin{align*}
\textswab{C}(f)(M_{J' \cup \{j\}}[x_j \repl left]) & = \\
M_{f(J') \cup \{f(j)\}}[\rho, x_{f(j)} \repl sq_l(x_{f'^{-1}(f(j))}, x_j)][x_j \repl left] & = \\
M_{f(J') \cup \{f(j)\}}[\rho, x_{f(j)} \repl left] & = \\
M_{\{f(j), \ldots f(j_n)\}}[x \repl M_{\{f(j_1), \ldots f(j)\}}][\rho] & = \\
\textswab{C}(f)(M_{\{ j, \ldots j_n \}}[x \repl M_{\{ j_1, \ldots j \}}]) & .
\end{align*}

Let us consider the second relation.
If either $f(j) = f(j_1)$ or $f(j) = f(j_n)$, then $\textswab{C}(f)(M_{J' \cup \{j\}}[x_j \repl right]) = M_{f(J')}[\rho] = \textswab{C}(f)(M_{J'})$.
If $f(j_1) < f(j) < f(j_n)$, then
\begin{align*}
\textswab{C}(f)(M_{J' \cup \{j\}}[x_j \repl right]) & = \\
M_{f(J') \cup \{f(j)\}}[\rho, x_{f(j)} \repl sq_l(x_{f'^{-1}(f(j))}, x_j)][x_j \repl right] & = \\
M_{f(J') \cup \{f(j)\}}[\rho, x_{f(j)} \repl sq_l(x_{f'^{-1}(f(j))})] & = \\
\textswab{C}(f)(M_{J'}) & ,
\end{align*}
If $f(j_i) < f(j) < f(j_{i+1})$, then the last equality holds by \eqref{rel:right},
otherwise it holds immediately by definition of $\textswab{C}(f)(M_{J'})$.

Thus we have a functor $\textswab{C} : \Delta \to \Mod{T}$.
This functor (uniquely) extends to a colimit-preserving functor $\textswab{C} : \sSet \to \Mod{T}$,
which has a right adjoint $N : \Mod{T} \to \sSet$ defined by equation $N(X) = \Hom(\textswab{C}(-),X)$.

\bibliographystyle{amsplain}
\bibliography{ref}

\end{document}
